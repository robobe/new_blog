<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8" />
<script src="https://cdn.jsdelivr.net/npm/roslib@1/build/roslib.min.js"></script>
<title>ROS Bridge Demo</title>

<script>
  // Connecting to ROS
  // -----------------
  var ros = new ROSLIB.Ros();
  ros.connect('ws://localhost:9090');
    ros.on('connection', function() {
        console.log('Connected to websocket server.');
    });
    ros.on('error', function(error) {
        console.log('Error connecting to websocket server: ', error);
    });
    ros.on('close', function() {
        console.log('Connection to websocket server closed.');
    }); 
    // -----------------    
</script>


<script>
    // Reading the parameter 'param1'
    var param1 = new ROSLIB.Param({
        ros: ros,
        name: '/minimal:param1'
    });

</script>

<body>
    <label for="param1Value">param1 value:</label>
    <span id="param1Value">Loading...</span>
    <button onclick="refreshParam1()">Refresh</button>
    <button onclick="updateParam1()">Update</button>

    <script>
        function displayParam1(value) {
            document.getElementById('param1Value').textContent = value;
        }

        // Initial fetch and display
        param1.get(function(value) {
            displayParam1(value);
        });

        // Refresh button handler
        function refreshParam1() {
            param1.get(function(value) {
                displayParam1(value);
            });
        }

        function updateParam1() {
            const newValue = prompt("Enter new value for param1:");
            if (newValue !== null) {
                param1.set(newValue);
                refreshParam1();
            }
        }


    </script>
</body>